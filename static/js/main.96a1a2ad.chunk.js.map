{"version":3,"sources":["AppContext.js","MovementFunctions.js","components/menu/menu.js","components/game/GameContext.js","components/card/card.js","components/cards-grid/card-grid.js","PicturesUploading.js","components/wrap/wrap.js","components/result/result.js","components/game/game.js","components/help/help.js","reducer.js","App.js","index.js"],"names":["AppContext","React","createContext","usePageChanger","useContext","changePage","usePageState","page","useTargetElements","targetElements","useAssistant","assistant","AppProvider","children","setPage","Provider","value","state","moveToTop","border","rowLength","setFocus","arr","moveToLeft","lastPicture","prev","searchNearestPosition","movingInCertainDirection","moveToBottom","moveToRight","lastRowStart","level","ind","priority","i","step","Math","sqrt","searchingResult","wrapMoveByRemoteController","elementsCount","rowCount","event","keyCode","focusPosition","refs","current","focus","querySelector","chooseElementOnFocusPosition","document","activeElement","click","Menu","buttonsRefs","useRef","useState","moveByRemoteController","Array","fill","menuChoiceHandler","number","sideLength","sendData","action","action_id","height","window","outerHeight","width","outerWidth","startGame","useEffect","chooseElementOnFocusPositionGame","addEventListener","removeEventListener","className","ref","tabIndex","onClick","GameContext","useResult","result","GameProvider","pictures","answers","setVision","vision","wrapVision","disableBtn","setDisableBtn","deleteWrapTimeout","Card","reference","isCorrect","count","index","flag","setFlag","error","setError","choice","setChoice","btnState","disabledBtn","disabled","onLoad","onError","src","alt","CardGrid","cardsList","refsList","isAnswerList","length","push","showCards","random","a","b","floor","randomListOfNum","size","answer","sameNum","END","sameCount","randomSameCount","resultCount","includes","Wrap","setNumber","visibility","setInterval","clearInterval","Result","Game","setWrapVision","resultPage","setResultPage","deleteTimeout","gameButtonsRefs","resultButtonsRefs","setFocusPosition","remoteController","setRemoteController","arrButtonStatus","pageChanger","concat","moveToMenuFromGame","moveToMenuFromResult","restartGame","clearTimeout","moveToResult","payload","setTimeout","wrapMoveByRemoteControllerGame","slice","clickHandler","setSpecialStatusForChosen","Help","helpPage","setHelpPage","helpImg","setHelpImg","setVisibility","buttonsVisibility","setButtonsVisibility","refsStatus","helpHandler","option","goToMenu","makeActionObj","environment","reducer","type","Error","App","targetElementsRefs","useReducer","appState","dispatch","assistantStateRef","assistantRef","getState","createAssistant","on","position","pageId","renderComponent","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96a1a2ad.chunk.js","sourcesContent":["import React, {useContext} from 'react'\n\nconst AppContext = React.createContext();\n\nexport function usePageChanger() {\n    const {changePage} = useContext(AppContext);\n    return changePage;\n}\n\nexport function usePageState() {\n    const {page} = useContext(AppContext);\n    return page;\n}\n\nexport function useTargetElements() {\n    const {targetElements} = useContext(AppContext);\n    return targetElements;\n}\n\nexport function useAssistant() {\n    const {assistant} = useContext(AppContext);\n    return assistant;\n}\n\nexport function AppProvider({children, page, setPage, targetElements, assistant}) {\n    function changePage(state) {\n        setPage(state);\n    }\n\n    return <AppContext.Provider value={{page, changePage, targetElements, assistant}}>\n        {children}\n    </AppContext.Provider>\n}","const UP_CODE = 19;\nconst DOWN_CODE = 20;\nconst LEFT_CODE = 21;\nconst RIGHT_CODE = 22;\nconst OK = 23;\n\n\nfunction moveToTop(border, rowLength, setFocus, arr) {\n    if (!rowLength) {\n        setFocus((prev) => (prev > border) ? prev - 1 : prev);\n    } else if (rowLength === 2) {\n        moveToLeft(border, setFocus, arr, 3);\n    } else {\n        const lastPicture = rowLength * rowLength - 1;\n        setFocus((prev) => {\n            if (prev > lastPicture + 1) {\n                return prev - 1;\n            } else if (prev === lastPicture + 1) {\n                if (arr[lastPicture]) {\n                    return lastPicture;\n                } else {\n                    return searchNearestPosition(prev, arr, lastPicture + 1, -1);\n                }\n            } else if (prev - rowLength >= border) {\n                if (arr[prev - rowLength]) {\n                    return prev - rowLength;\n                } else return movingInCertainDirection(prev, arr, lastPicture + 1, -2)\n            } else {\n                return prev;\n            }\n        })\n    }\n}\n\nfunction moveToBottom(border, rowLength, setFocus, arr) {\n    if (!rowLength) {\n        setFocus((prev) => (prev < border) ? prev + 1 : prev);\n    } else if (rowLength === 2) {\n        moveToRight(border, setFocus, arr, 3);\n    } else {\n        const lastPicture = rowLength * rowLength - 1;\n        const lastRowStart = lastPicture - rowLength;\n        setFocus((prev) => {\n            if (prev > lastPicture && prev < border) {\n                return prev + 1;\n            } else if (prev > lastRowStart && prev <= lastPicture) {\n                return lastPicture + 1;\n            } else if (prev + rowLength <= border) {\n                if (arr[prev + rowLength]) return prev + rowLength;\n                else return movingInCertainDirection(prev, arr, lastPicture + 1, 2);\n            } else {\n                return prev;\n            }\n        })\n    }\n}\n\nfunction moveToLeft(border, setFocus, arr, level) {\n    if (!level) {\n        setFocus((prev) => (prev > border) ? prev - 1 : prev);\n    } else {\n        setFocus((prev) => {\n            if (prev > border) {\n                if (arr[prev - 1]) {\n                    return prev - 1;\n                } else {\n                    const nearestPosition = searchNearestPosition(prev, arr, level, -1);\n                    return nearestPosition;\n                }\n            } else return prev;\n        });\n    }\n}\n\nfunction moveToRight(border, setFocus, arr, level) {\n    if (!level) {\n        setFocus((prev) => (prev < border) ? prev + 1 : prev);\n    } else {\n        setFocus((prev) => {\n            if (prev < border) {\n                if (arr[prev + 1]) {\n                    return prev + 1;\n                } else {\n                    const nearestPosition = searchNearestPosition(prev, arr, level, 1);\n                    return nearestPosition;\n                }\n            } else return prev;\n        });\n    }\n}\n\nfunction movingInCertainDirection(ind, arr, level, priority) {\n    if (priority === 1) {\n        for (let i = ind + 1; i <= level; i++) {\n            if (arr[i]) {\n                return i;\n            }\n        }\n    } else if (priority === -1) {\n        for (let i = ind - 1; i >= 0; i--) {\n            if (arr[i]) {\n                return i;\n            }\n        }\n    } else if (priority === 2) {\n        const step = Math.sqrt(level);\n        for (let i = ind + step; i < level; i += step) {\n            if (arr[i]) {\n                return i;\n            }\n        }\n        return level;\n    } else {\n        const step = Math.sqrt(level);\n        for (let i = ind - step; i >= 0; i -= step) {\n            if (arr[i]) {\n                return i;\n            }\n        }\n        return ind;\n    }\n    return -1;\n}\n\nfunction searchNearestPosition(ind, arr, level, priority) {\n    let searchingResult = movingInCertainDirection(ind, arr, level, priority);\n    if (searchingResult !== -1) {\n        return searchingResult;\n    } else if (level === 3) {\n        return ind;\n    } else {\n        searchingResult = movingInCertainDirection(ind, arr, level, -priority);\n        return searchingResult;\n    }\n}\n\nexport function wrapMoveByRemoteController(elementsCount, rowCount, setFocus, arr) {\n    return function(event) {\n        switch (event.keyCode) {\n            case UP_CODE:\n                if (rowCount === 2) {\n                    moveToTop(0, 2, setFocus, arr);\n                } else {\n                    moveToTop(0, rowCount, setFocus, arr);\n                }\n                break;\n            case DOWN_CODE:\n                if (rowCount === 2) {\n                    moveToBottom(elementsCount - 1, 2, setFocus, arr);\n                } else {\n                    moveToBottom(elementsCount - 1, rowCount, setFocus, arr);\n                }\n                break;\n            case RIGHT_CODE:\n                if (rowCount === 2) {\n                    moveToRight(elementsCount - 1, setFocus, arr, 3);\n                } else {\n                    moveToRight(elementsCount - 1, setFocus, arr, rowCount * rowCount);\n                }\n                break;\n            case LEFT_CODE:\n                if (rowCount === 2) {\n                    moveToLeft(0, setFocus, arr, 3);\n                } else {\n                    moveToLeft(0, setFocus, arr, rowCount * rowCount);\n                }\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nexport function setFocus(focusPosition, refs, rowCount) {\n    if (focusPosition === -1) return;\n    if (rowCount === 0 || focusPosition >= rowCount * rowCount) {\n        refs.current[focusPosition].current.focus();\n    } else {\n        refs.current[focusPosition].current.querySelector(\".picture-btn\").focus();\n    }\n}\n\n\nexport function chooseElementOnFocusPosition() {\n    return function(event) {\n        if (event.keyCode === OK) {\n            document.activeElement.click();\n        }\n    }\n}\n\nexport function setSpecialStatusForChosen(focusPosition, level, arr) {\n    return function() {\n        if (level && (focusPosition < level)) {\n            arr[focusPosition] = false;\n        }\n    }\n}\n\n\n","import React, {useEffect, useRef, useState} from 'react'\nimport './menu.css'\nimport {useAssistant, usePageChanger, useTargetElements} from \"../../AppContext\";\nimport {wrapMoveByRemoteController, setFocus, chooseElementOnFocusPosition} from \"../../MovementFunctions\";\n\nexport function Menu() {\n    const changePage = usePageChanger();\n    /* Refs storage for remote controller events */\n    const buttonsRefs = useRef([useRef(), useRef(), useRef(), useRef()]);\n    /* Variable for assistant actions from App.js */\n    const targetElements = useTargetElements();\n    targetElements.current = buttonsRefs.current;\n    /* State for focus */\n    const [focusPosition, setFocusPosition] = useState(-1);\n    /* Array for determinate if picture was chosen */\n    const arrButtonStatus = useRef(Array(4).fill(true));\n    /* Get remote controller function */\n    const moveByRemoteController = wrapMoveByRemoteController(4, 0, setFocusPosition, arrButtonStatus.current)\n    /* Get assistant */\n    const assistant = useAssistant();\n\n    function startGame(number, sideLength) {\n        const height = window.outerHeight;\n        const width = window.outerWidth;\n        if (height <= 800 || width <= 800) {\n            changePage({value: 1, level: number - sideLength});\n        } else {\n            changePage({value: 1, level: number});\n        }\n    }\n\n    /* Handler for menu options button is clicked event */\n    function menuChoiceHandler(level) {\n        let number = 0;\n        let sideLength = 0;\n        switch (level) {\n            case \"easy\":\n                number = 9;\n                sideLength = 3;\n                break;\n            case \"middle\":\n                number = 16;\n                sideLength = 4;\n                break;\n            case \"hard\":\n                number = 25;\n                sideLength = 4;\n                break;\n            case \"help\":\n                return function() {\n                    assistant.current.sendData({action: {action_id: level}});\n                    changePage({value: 3})\n                }\n        }\n        return function() {\n            assistant.current.sendData({action: {action_id: level}});\n            startGame(number, sideLength);\n        }\n    }\n\n    /* Add OK event listener */\n    useEffect(() => {\n        const chooseElementOnFocusPositionGame = chooseElementOnFocusPosition();\n        document.addEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n\n        return () => {\n            document.removeEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n        }\n    }, [])\n\n    /* Add remote controller event listener */\n    useEffect(() => {\n        document.addEventListener(\"keydown\", moveByRemoteController);\n\n        return () => {\n            document.removeEventListener(\"keydown\", moveByRemoteController);\n        }\n    }, [])\n\n    /* Set focus */\n    useEffect(() => {\n        setFocus(focusPosition, buttonsRefs, 0);\n    }, [focusPosition])\n\n\n    return <div className=\"menu-container\">\n        <div className=\"menu-options\">\n            <button ref={buttonsRefs.current[0]} tabIndex={1} className='btn btn-level' onClick={menuChoiceHandler(\"easy\")}>Легкий уровень\n                <div className=\"indicator\">\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                </div>\n            </button>\n            <button ref={buttonsRefs.current[1]} tabIndex={2} className='btn btn-level' onClick={menuChoiceHandler(\"middle\")}>Средний уровень\n                <div className=\"indicator\">\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                    <div className=\"indicator-icon\">&#9733;</div>\n                </div>\n            </button>\n            <button ref={buttonsRefs.current[2]} tabIndex={3} className='btn btn-level' onClick={menuChoiceHandler(\"hard\")}>Сложный уровень\n                <div className=\"indicator\">\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                    <div className=\"sparkle-icon\">&#9733;</div>\n                </div>\n            </button>\n            <button ref={buttonsRefs.current[3]} tabIndex={4} className='btn btn-option btn-help' onClick={menuChoiceHandler(\"help\")}>Помощь</button>\n        </div>\n    </div>\n}","import React, {createContext, useContext} from \"react\";\n\nconst GameContext = createContext();\n\nexport function usePicturesArr() {\n    const {pictures} = useContext(GameContext);\n    return pictures;\n}\n\nexport function useAnswerArr() {\n    const {answers} = useContext(GameContext);\n    return answers;\n}\n\nexport function useResult() {\n    const {result} = useContext(GameContext);\n    return result;\n}\n\nexport function useSetVision() {\n    const {setVision} = useContext(GameContext);\n    return setVision;\n}\n\nexport function useVision() {\n    const {vision} = useContext(GameContext);\n    return vision;\n}\n\nexport function useWrapVision() {\n    const {wrapVision} = useContext(GameContext);\n    return wrapVision;\n}\n\nexport function useDisableBtn() {\n    const {setDisableBtn} = useContext(GameContext);\n    return setDisableBtn;\n}\n\nexport function useBtnState() {\n    const {disableBtn} = useContext(GameContext);\n    return disableBtn;\n}\n\nexport function useButtonsRefs() {\n    const {buttonsRefs} = useContext(GameContext);\n    return buttonsRefs;\n}\n\nexport function useDeleteWrapTimeout() {\n    const {deleteWrapTimeout} = useContext(GameContext);\n    return deleteWrapTimeout;\n}\n\nexport function GameProvider({children, pictures, answers, result, setVision, vision, wrapVision, disableBtn, setDisableBtn, buttonsRefs, deleteWrapTimeout}) {\n    return <GameContext.Provider value={{pictures, answers, result, setVision, vision, wrapVision, disableBtn, setDisableBtn, buttonsRefs, deleteWrapTimeout}}>\n        {children}\n    </GameContext.Provider>\n}","import React, {useEffect, useState, useRef} from 'react'\nimport './card.css'\nimport {usePageState} from \"../../AppContext\";\nimport {useBtnState, useButtonsRefs, useDisableBtn, useResult, useSetVision, useVision} from \"../game/GameContext\";\n\nexport function Card({reference, isCorrect, count, index}) {\n    const [flag, setFlag] = useState(false);\n    const [error, setError] = useState(false);\n    const [choice, setChoice] = useState(\"active\");\n\n    const {level} = usePageState();\n    const setVision = useSetVision();\n    const vision = useVision();\n    const btnState = useBtnState();\n    const disabledBtn = useDisableBtn();\n    const result = useResult();\n\n    /* Remove controller */\n    const buttonsRefs = useButtonsRefs();\n\n    function choseItem() {\n        setChoice(\"chosen\");\n    }\n\n    useEffect(() => {\n        if (flag) {\n            ++count.current;\n            if (count.current === level) {\n                setVision('ready');\n            }\n        }\n    }, [flag])\n\n    useEffect(() => {\n        if (error === true && vision === \"invisible-img\") {\n            setVision('error');\n        }\n    }, [error])\n\n    useEffect(() => {\n        if (choice === \"chosen\") {\n            if (btnState !== \"enable\") {\n                disabledBtn(\"enable\");\n            }\n            if (isCorrect === \"wrong\") {\n                result.current--;\n            } else {\n                result.current++;\n            }\n        }\n    }, [choice])\n\n    return <div className={\"card card-level_\" + level}>\n        <div ref={buttonsRefs.current[index - 1] = useRef()} className={\"card-inner inner-level_\" + level}>\n            {(vision !== \"btn\") && <div className={\"cover \" + vision}/>}\n            {(vision === \"btn\") && <button disabled={choice === \"chosen\"} onClick={choseItem} className={\"picture-btn \" + choice + ' ' + isCorrect}>{index}</button>}\n            <img onLoad={() => setFlag(true)} onError={() => {setError(true)}} src={reference} alt=\"Game element\" className=\"img\"/>\n        </div>\n    </div>\n}","import React, {useRef} from 'react'\nimport './card-grid.css'\nimport {usePageState} from \"../../AppContext\";\nimport {Card} from \"../card/card\";\nimport {useAnswerArr, usePicturesArr} from \"../game/GameContext\";\n\nexport function CardGrid() {\n    const cardsList = useRef([]);\n    const count = useRef(0);\n\n    const {level} = usePageState();\n    const refsList = usePicturesArr();\n    const isAnswerList = useAnswerArr();\n\n    function showCards() {\n        if (cardsList.current.length === 0) {\n            for (let i = 0; i <level; i++) {\n                cardsList.current.push(<Card count={count} index={i + 1} key={i} isCorrect={isAnswerList[i]} reference={`https://pictures-for-memory-game.s3.eu-north-1.amazonaws.com/${refsList[i]}.jpg`}/>)\n            }\n        }\n        return cardsList.current;\n    }\n\n    return <div className='grid'>\n        {showCards()}\n    </div>\n}","const START = 1;\nconst END = 25;\n\nfunction random(a, b) {\n    return a + Math.floor((b - a) * Math.random());\n}\n\nfunction randomSameCount(size) {\n    if (size <= 9) {\n        return random(3, 6);\n    } else if (size <= 16) {\n        return  random(4, 7);\n    } else {\n        return random(6, 9);\n    }\n}\n\nexport function randomListOfNum(size) {\n    const result = new Array(size).fill(0);\n    const answer = new Array(size).fill(\"wrong\");\n    const sameNum = random(START, END + 1);\n    let sameCount = randomSameCount(size);\n    const resultCount = size - sameCount;\n    while (sameCount > 0) {\n        let ind = random(0, size);\n        if (result[ind] === 0) {\n            result[ind] = sameNum;\n            answer[ind] = \"right\";\n            sameCount--;\n        }\n    }\n    let i = 0;\n    while (i < size) {\n        if (result[i] !== 0) {\n            i++;\n            continue;\n        }\n        const value = random(START, END + 1);\n        if (!result.includes(value)) {\n            result[i] = value;\n            i++;\n        }\n    }\n    return [result, answer, resultCount];\n}","import React, {useEffect, useState} from 'react'\nimport './wrap.css'\nimport {useDeleteWrapTimeout, useWrapVision} from \"../game/GameContext\";\n\nexport function Wrap() {\n    const [number, setNumber] = useState(3);\n    const visibility = useWrapVision();\n    const deleteWrapTimeout = useDeleteWrapTimeout();\n\n    useEffect(() => {\n        if (visibility === \"covered\") {\n            deleteWrapTimeout.current =  setInterval(() => {setNumber((prev) => {\n                if (prev === 1) {\n                    clearInterval(deleteWrapTimeout.current);\n                    return 3;\n                } else {\n                    return prev - 1;\n                }\n            })}, 1000)\n        }\n    }, [visibility])\n\n    return <div className={\"wrap \" + visibility}>\n        <div className=\"wrap-content\">{number}</div>\n    </div>\n}","import React from 'react'\nimport './result.css'\nimport {useResult} from \"../game/GameContext\";\n\nexport function Result() {\n    const result = useResult();\n\n    return <div className=\"result-container\">\n        <div className=\"results-box\">\n            <div className=\"current-result\">Результат: <span>{result.current}%</span></div>\n        </div>\n    </div>\n}","import React, {useEffect, useRef, useState} from 'react'\nimport './game.css'\nimport {CardGrid} from \"../cards-grid/card-grid\";\nimport {randomListOfNum} from \"../../PicturesUploading\";\nimport {useAssistant, usePageChanger, usePageState, useTargetElements} from \"../../AppContext\";\nimport {GameProvider} from \"./GameContext\";\nimport {Wrap} from \"../wrap/wrap\";\nimport {Result} from \"../result/result\";\nimport {\n    wrapMoveByRemoteController,\n    setFocus,\n    chooseElementOnFocusPosition,\n    setSpecialStatusForChosen\n} from \"../../MovementFunctions\";\n\nexport function Game(setPage) {\n    const [vision, setVision] = useState('invisible-img');\n    const [wrapVision, setWrapVision] = useState(\"none\");\n    const [disableBtn, setDisableBtn] = useState('disabled-ready');\n    const [resultPage, setResultPage] = useState(\"not-result\");\n    const deleteTimeout = useRef({});\n    const deleteWrapTimeout = useRef({});\n\n    /* Refs storage for remote controller events */\n    const buttonsRefs = useRef([]);\n    /* Refs for control buttons */\n    const gameButtonsRefs = useRef([useRef(), useRef(), useRef()]);\n    const resultButtonsRefs = useRef([useRef(), useRef()]);\n    const refs = useRef([]);\n    /* State for focus */\n    const [focusPosition, setFocusPosition] = useState(-1);\n\n    /* State for changing remote controller actions */\n    const [remoteController, setRemoteController] = useState(0);\n\n    const {level} = usePageState();\n    const pictures = useRef(randomListOfNum(level));\n    const result = useRef(pictures.current[2]);\n\n    /* Array for determinate if picture was chosen */\n    const arrButtonStatus = useRef(Array(level + 3).fill(true));\n\n    const pageChanger = usePageChanger();\n\n    /* Variable for assistant actions from App.js */\n    const targetElements = useTargetElements();\n    targetElements.current = [].concat(buttonsRefs.current, gameButtonsRefs.current, resultButtonsRefs.current);\n\n    /* Get assistant */\n    const assistant = useAssistant();\n\n    function setTimeoutVisible() {\n        deleteTimeout.current = setTimeout(() => {\n            setWrapVision(\"covered\");\n        }, 2000);\n    }\n\n    function setTimeoutTimer() {\n        deleteTimeout.current = setTimeout(() => {\n            setWrapVision(\"none\");\n            setVision(\"btn\");\n            /* set state for pictures + 2 buttons for remote controller */\n            setRemoteController(1);\n            /* Message for assistant */\n            assistant.current.sendData({action: {action_id: 'can_chose_card'}})\n        }, 3000)\n    }\n\n    function setReadyTimer() {\n        deleteTimeout.current = setTimeout(() => {\n            setWrapVision(\"none\");\n            setVision(\"visible\");\n        }, 3000)\n    }\n\n    function moveToMenuFromGame() {\n        assistant.current.sendData({action: {action_id: \"menu\"}});\n        setVision(\"cleanup\");\n    }\n\n    function moveToMenuFromResult() {\n        assistant.current.sendData({action: {action_id: \"menu\"}});\n        pageChanger(0);\n    }\n\n    function restartGame() {\n        clearTimeout(deleteTimeout.current);\n        clearInterval(deleteWrapTimeout.current);\n        assistant.current.sendData({action: {action_id: \"restart\"}});\n        pageChanger({value: 2, level});\n    }\n\n    function moveToResult() {\n        result.current = Math.floor(result.current * 100 / level);\n        assistant.current.sendData({action: {action_id: \"ready\", payload: result.current}})\n        setResultPage(\"is-result\");\n        setVision('vision');\n    }\n\n    function renderRelevantBtn() {\n        if (resultPage === \"not-result\") {\n            return <div className='btn-container'>\n                <button ref={gameButtonsRefs.current[0]} className=\"game-btn enabled\" onClick={moveToMenuFromGame}>Выбрать уровень</button>\n                <button ref={gameButtonsRefs.current[1]} className=\"game-btn enabled\" onClick={restartGame}>Начать заново</button>\n                <button ref={gameButtonsRefs.current[2]} className={\"game-btn \" + (disableBtn !== \"enable\" ? \"disabled\" : \"enabled\")} onClick={moveToResult} disabled={disableBtn !== \"enable\"}>Готово</button>\n            </div>\n        }\n        return <div className=\"result-btn-container\">\n            <button ref={resultButtonsRefs.current[0]} className=\"game-btn enabled\" onClick={restartGame}>Повторить попытку</button>\n            <button ref={resultButtonsRefs.current[1]} className=\"game-btn enabled\" onClick={moveToMenuFromResult}>Выбрать уровень</button>\n        </div>\n    }\n\n    /* Add OK event listener */\n    useEffect(() => {\n        const chooseElementOnFocusPositionGame = chooseElementOnFocusPosition();\n        document.addEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n\n        return () => {\n            document.removeEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n        }\n    }, [])\n\n    useEffect(() => {\n        if (vision === \"ready\") {\n            setWrapVision(\"covered\");\n        } else if (vision === \"visible\") {\n            setTimeoutVisible();\n        } else if (vision === 'cleanup') {\n            clearTimeout(deleteTimeout.current);\n            clearInterval(deleteWrapTimeout.current);\n            pageChanger({value: 0});\n        }\n    }, [vision])\n\n    useEffect(() => {\n        if (wrapVision === \"covered\") {\n            if (vision === \"ready\") {\n                setReadyTimer();\n            } else {\n                setTimeoutTimer();\n            }\n        }\n    }, [wrapVision])\n    \n    useEffect(() => {\n        if (resultPage === \"is-result\") {\n            /* set state for result page for remove controller */\n            setRemoteController(3);\n        }\n    }, [resultPage])\n\n    useEffect(() => {\n        if (disableBtn === \"enable\") {\n            /* set state for pictures + 3 buttons for remove controller */\n            setRemoteController(2);\n        }\n    }, [disableBtn])\n\n    /* Listen remove controller state changing */\n    useEffect(() => {\n        let wrapMoveByRemoteControllerGame = null;\n        switch (remoteController) {\n            case 0:\n                refs.current = gameButtonsRefs.current.slice(0, 2);\n                wrapMoveByRemoteControllerGame = wrapMoveByRemoteController(2, 0, setFocusPosition, arrButtonStatus.current);\n                document.addEventListener(\"keydown\", wrapMoveByRemoteControllerGame);\n                break;\n            case 1:\n                refs.current = [].concat(buttonsRefs.current, gameButtonsRefs.current.slice(0, 2));\n                setFocusPosition((prev) => {\n                    if (prev === -1) return -1;\n                    else return prev + level;\n                });\n                wrapMoveByRemoteControllerGame = wrapMoveByRemoteController(level + 2, Math.sqrt(level), setFocusPosition, arrButtonStatus.current);\n                document.addEventListener(\"keydown\", wrapMoveByRemoteControllerGame);\n                break;\n            case 2:\n                refs.current =[].concat(buttonsRefs.current, gameButtonsRefs.current);\n                wrapMoveByRemoteControllerGame = wrapMoveByRemoteController(level + 3, Math.sqrt(level), setFocusPosition, arrButtonStatus.current);\n                document.addEventListener(\"keydown\", wrapMoveByRemoteControllerGame);\n                break;\n            case 3:\n                refs.current = resultButtonsRefs.current;\n                setFocusPosition(-1);\n                wrapMoveByRemoteControllerGame = wrapMoveByRemoteController(2, 0, setFocusPosition, arrButtonStatus.current);\n                document.addEventListener(\"keydown\", wrapMoveByRemoteControllerGame);\n                break;\n        }\n        return () => {\n            document.removeEventListener(\"keydown\", wrapMoveByRemoteControllerGame);\n        }\n    }, [remoteController])\n\n    /* Set focus */\n    useEffect(() => {\n        switch (remoteController) {\n            case 0:\n                setFocus(focusPosition, refs, 0);\n                break;\n            case 1:\n                setFocus(focusPosition, refs, Math.sqrt(level));\n                break;\n            case 2:\n                setFocus(focusPosition, refs, Math.sqrt(level));\n                break;\n            case 3:\n                setFocus(focusPosition, refs, 0);\n                break;\n        }\n        const clickHandler = setSpecialStatusForChosen(focusPosition, level, arrButtonStatus.current);\n        document.addEventListener(\"click\", clickHandler);\n\n        return () => {\n            document.removeEventListener(\"click\", clickHandler);\n        }\n    }, [focusPosition])\n\n    return <GameProvider pictures={pictures.current[0]} answers={pictures.current[1]} result={result} setVision={setVision} vision={vision} wrapVision={wrapVision} disableBtn={disableBtn} setDisableBtn={setDisableBtn} buttonsRefs={buttonsRefs} deleteWrapTimeout={deleteWrapTimeout}>\n        <Wrap/>\n        <div className={\"game-container \" + resultPage}>\n            {(resultPage === \"is-result\") && <Result className=\"result\"/>}\n            <div className='game-inner'>\n                <CardGrid/>\n                {(vision === \"error\") && <div className={\"error-wrapper\"}>\n                    <div className=\"error-content\">Упс... Что-то пошло не так. Проверьте подключение к интернету</div>\n                </div>}\n                {(vision === 'invisible-img') && <div className=\"loader\">\n                    <div className=\"spinner\">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>}\n                {renderRelevantBtn()}\n            </div>\n        </div>\n    </GameProvider>\n}","import React, {useEffect, useRef, useState} from \"react\";\nimport \"./help.css\"\nimport {useAssistant, usePageChanger, useTargetElements} from \"../../AppContext\";\nimport {\n    chooseElementOnFocusPosition,\n    setFocus,\n    wrapMoveByRemoteController\n} from \"../../MovementFunctions\";\n\nexport function Help() {\n    const [helpPage, setHelpPage] = useState(0);\n    /* For help pictures */\n    const [helpImg, setHelpImg] = useState()\n    function makeLink(number) {\n        return `https://memory-game-help.s3.eu-north-1.amazonaws.com/${number}.jpeg`\n    }\n    /* Flag for pictures loading */\n    const [visibility, setVisibility] = useState(\"invisible\");\n\n    const [buttonsVisibility, setButtonsVisibility] = useState([\"disabled\", \"enabled\"]);\n    /* Refs storage for remote controller events Collection */\n    const buttonsRefs = useRef([useRef(), useRef(), useRef()]);\n    /* Variable for assistant actions from App.js */\n    const targetElements = useTargetElements();\n    targetElements.current = buttonsRefs.current;\n    /* Variable to control used elements */\n    const refsStatus = useRef(Array(3).fill(true));\n    /* State for focus */\n    const [focusPosition, setFocusPosition] = useState(-1);\n    /* Get assistant */\n    const assistant = useAssistant();\n\n    /* Handler for navigation between help pages and return to menu */\n    function helpHandler(option) {\n        switch (option) {\n            case \"menu\":\n                return function() {\n                    assistant.current.sendData({action: {action_id: option}})\n                    goToMenu({value: 0})\n                }\n            case \"back\":\n                return function() {\n                    assistant.current.sendData({action: {action_id: option, payload: helpPage - 1}})\n                    setHelpPage(prev => prev - 1)\n                }\n            case \"next\":\n                return function() {\n                    assistant.current.sendData({action: {action_id: option, payload: helpPage + 1}})\n                    setHelpPage(prev => prev + 1)\n                }\n        }\n    }\n\n    useEffect(() => {\n        /* Add OK event listener */\n        const chooseElementOnFocusPositionGame = chooseElementOnFocusPosition();\n        document.addEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n\n        return () => {\n            document.removeEventListener(\"keydown\", chooseElementOnFocusPositionGame);\n        }\n    }, [])\n\n    /* Set focus */\n    useEffect(() => {\n        setFocus(focusPosition, buttonsRefs, 0);\n    }, [focusPosition])\n\n    const goToMenu = usePageChanger();\n\n    useEffect(() => {\n        /* Variable for remote controller function */\n        let moveByRemoteController = null;\n        switch (helpPage) {\n            case 0:\n                setButtonsVisibility([\"disabled\", \"enabled\"]);\n                refsStatus.current = [true, false, true];\n                /* Get function for remote controller */\n                moveByRemoteController = wrapMoveByRemoteController(3, 2, setFocusPosition, refsStatus.current);\n                document.addEventListener(\"keydown\", moveByRemoteController);\n                break;\n            case 1:\n                setButtonsVisibility([\"enabled\", \"enabled\"]);\n                refsStatus.current = [true, true, true];\n                /* Get function for remote controller */\n                moveByRemoteController = wrapMoveByRemoteController(3, 2, setFocusPosition, refsStatus.current);\n                document.addEventListener(\"keydown\", moveByRemoteController);\n                break;\n            case 5:\n                setButtonsVisibility([\"enabled\", \"disabled\"]);\n                refsStatus.current = [true, true, false];\n                /* Get function for remote controller */\n                moveByRemoteController = wrapMoveByRemoteController(3, 2, setFocusPosition, refsStatus.current);\n                document.addEventListener(\"keydown\", moveByRemoteController);\n                break;\n        }\n        setHelpImg(makeLink(helpPage + 1));\n        return () => {\n            document.removeEventListener(\"keydown\", moveByRemoteController);\n        }\n    }, [helpPage])\n\n    return <div className={\"help_container\"}>\n        <div className=\"help_img_wrapper\">\n            {(visibility === \"invisible\") && <div className=\"spinner\">\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n            </div>}\n            <img className={\"help_img \" + visibility} src={helpImg} alt=\"Help_img\" onLoad={() => setVisibility(\"visible\")}/>\n        </div>\n        <div className=\"btn-container\">\n            <button ref={buttonsRefs.current[0]} className={\"game-btn enabled\"} onClick={helpHandler(\"menu\")}>Вернуться к меню</button>\n            <button ref={buttonsRefs.current[1]} disabled={buttonsVisibility[0] === \"disabled\"} className={\"game-btn \" + buttonsVisibility[0]} onClick={helpHandler(\"back\")}>Предыдущая</button>\n            <button ref={buttonsRefs.current[2]} disabled={buttonsVisibility[1] === \"disabled\"} className={\"game-btn \" + buttonsVisibility[1]} onClick={helpHandler(\"next\")}>Следующая</button>\n        </div>\n    </div>\n}","function makeActionObj (environment, value) {\n    return {environment, value}\n}\n\nexport const reducer = (state, action) => {\n    switch (action.type) {\n        case \"easy_level\":\n            return makeActionObj(\"menu\", 0);\n        case \"middle_level\":\n            return makeActionObj(\"menu\", 1);\n        case \"hard_level\":\n            return makeActionObj(\"menu\", 2);\n        case \"help\":\n            return makeActionObj(\"menu\", 3);\n        case \"help_menu\":\n            return makeActionObj(\"help\", 0);\n        case \"help_back\":\n            return makeActionObj(\"help\", 1);\n        case \"help_next\":\n            return makeActionObj(\"help\", 2);\n        case \"ready\":\n            return makeActionObj(\"game\", -3);\n        case \"game_restart\":\n            return makeActionObj(\"game\", -4);\n        case \"game_menu\":\n            return makeActionObj(\"game\", -5);\n        case \"result_menu\":\n            return makeActionObj(\"result\", -1);\n        case \"result_restart\":\n            return makeActionObj(\"result\", -2);\n        case \"card\":\n            return makeActionObj(\"card\", action.number);\n        default:\n            throw new Error();\n    }\n}","import React, {useState, useEffect, useRef, useReducer} from \"react\";\nimport './App.css';\nimport {Menu} from './components/menu/menu.js'\nimport {Game} from './components/game/game'\nimport {AppProvider} from \"./AppContext\";\nimport {Help} from \"./components/help/help\";\nimport {createSmartappDebugger, createAssistant, AssistantAppState} from \"@sberdevices/assistant-client\";\nimport {reducer} from \"./reducer\";\n\nconst initializeAssistant = (getState) => {\n    if (process.env.NODE_ENV === \"development\") {\n        return createSmartappDebugger({\n            token: \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZTFmNTQxODM0NzEwNjkyNzAzM2QwYTQ0ODFmMTNkNTJiMTA1N2NhMWNkY2I0OTg0ZGNiMWQxZjQzMzdhMzYyNTM5YmU5MjcwMDQyNjI5OCIsImF1ZCI6IlZQUyIsImV4cCI6MTYzMDA3NjIzMSwiaWF0IjoxNjI5OTg5ODIxLCJpc3MiOiJLRVlNQVNURVIiLCJ0eXBlIjoiQmVhcmVyIiwianRpIjoiNmRiY2VlMzYtMDk2YS00YmEzLWExZmUtZTc3YzZlZjg4YTYwIiwic2lkIjoiZDFjMDFjMGItZmY1Ni00Mzk1LWJmMWMtYTI3MmFlNzhmZGI2In0.UhGWG1X_p0SHdY-Bnf3KT4AmYUtyrmYNwQcfFVb1YGBKlGEoDroPwabgtisIbpcgZSZnITwpIpIdjCVYajy9V3SS6-0kiCI-3Nq5IaGrsl8qiLyiP0gk143GLxUcJEhBbLfdAP_XPlU7t5DsZ2RjTm7OTNkHxUecia6cpi_-Hc-_wJD0gn2CTOxSw9IE14GOBdl_xj_Yi9UM79QtMKL9MQRxWTwyvtfAIeSBbIx5NdEKzO6DRNvqWIc2u8HEuAW8hNHTMZv6n8Kjf2M5Shtv8cQQv3XpPyHkADIXH7sscajZkpCsGHnTM9940dzi-YTMrfWF1CLM9pj_iNUVQlWMO-SvsMt2O9zRul7lEVezRpff5_cNEhn1ZOuvalKHkb9-1i2NnmHufgPMCU4ngsEE5Fl-OeAwyCxfJJMfC0lsi6EqqLcNg5s2B9kjCodO29fuAlL-3jc60HO5MRJQEPMDhac5XZH9fzZoO3YWcrBW9y0Wz1gnPYtec5bHCvhMFWvoKvJfo8PirmzduNI0sl8rNX4g8ZF1VGNmpRQAuO38hJ-jhw6OKKDSEQrBitzb8OfWm2SVUHxcHE5rsXyLOVLXcVpigk9AFVBkHl9URNOxac4qS5vN2XV4TyNAJfqqVoCAFAATY9MRPloINqRS_WmZKTzSdDJ6m1cV78p93_7twCE\",\n            initPhrase: `Запусти тренажер памяти`,\n            getState,\n        });\n    }\n\n    return createAssistant({ getState });\n};\n\nfunction App() {\n    const [page, setPage] = useState({value: 0});\n\n    /* Assistant */\n    const targetElementsRefs = useRef([]);\n\n    const [appState, dispatch] = useReducer(reducer, {environment: \"initial\"});\n\n    const assistantStateRef = useRef();\n    const assistantRef = useRef();\n\n    useEffect(() => {\n        assistantRef.current = initializeAssistant(() => assistantStateRef.current);\n\n        assistantRef.current.on(\"data\", ({ action }) => {\n            if (action) {\n                dispatch(action);\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        if (appState.environment !== \"initial\") {\n            if (appState.value < 0) {\n                const position = targetElementsRefs.current.length + appState.value;\n                targetElementsRefs.current[position].current.click();\n                if (appState.value === -3 && targetElementsRefs.current[position].current.disabled) {\n                    assistantRef.current.sendData({action: {action_id: \"ready_disabled\"}});\n                }\n            } else if (appState.environment === \"card\") {\n                const length = targetElementsRefs.current.length;\n                if (appState.value > length - 5) {\n                    assistantRef.current.sendData({action: {action_id: \"not_card\"}});\n                } else {\n                    targetElementsRefs.current[appState.value - 1].current.querySelector(\".picture-btn\").click();\n                    assistantRef.current.sendData({action: {action_id: \"is_card\"}});\n                }\n            } else if (!targetElementsRefs.current[appState.value].current.disabled) {\n                targetElementsRefs.current[appState.value].current.click();\n            } else {\n                let pageId = \"\";\n                if (appState.value === 1) {\n                    pageId = \"help_first\"\n                } else {\n                    pageId = \"help_last\"\n                }\n                assistantRef.current.sendData({action: {action_id: pageId}})\n            }\n        }\n    }, [appState]);\n\n    /* Render components */\n    function renderComponent() {\n        switch (page.value) {\n            case 1:\n                return <Game/>\n            case 2:\n                setTimeout(() => setPage({...page, value: 1}), 0)\n                return <div/>\n            case 3:\n                return <Help/>\n            default:\n                return <Menu/>\n        }\n    }\n\n    return (\n        <AppProvider page={page} setPage={setPage} targetElements={targetElementsRefs} assistant={assistantRef}>\n            <div className=\"App\">\n                {renderComponent()}\n            </div>\n        </AppProvider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n    document.getElementById(\"root\")\n)\n\n"],"sourceRoot":""}